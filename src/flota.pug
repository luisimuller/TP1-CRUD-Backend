extends layout
block content
  h1.titulo-flota Nuestra Flota
  link(rel="stylesheet", href="/styles/flota.css")
  // Modal para agregar vehículo
  .modal#modalAgregarVehiculo(style="display:none;")
    .modal-content
      form#formAgregarVehiculo
        h2 Agregar vehículo
        input(type="text", name="patente", placeholder="Patente (ej: ABC-123)", required)
        select(name="tipo", required)
          option(value="", selected disabled) Tipo de vehículo
          option(value="Camión") Camión
          option(value="Furgón") Furgón
          option(value="Camioneta") Camioneta
        select(name="estado", required)
          option(value="", selected disabled) Estado
          option(value="Activo") Activo
          option(value="En Reparación") En Reparación
          option(value="Retirado") Retirado
        input(type="number", name="capacidad", placeholder="Capacidad (kg)", required min="1")
        .modal-actions
          button(type="submit") Guardar
          button(type="button", id="btnCancelarAgregar") Cancelar
  // Modal para editar vehículo
  .modal#modalEditarVehiculo(style="display:none;")
    .modal-content
      form#formEditarVehiculo
        h2 Modificar vehículo
        input(type="hidden", name="id")
        input(type="text", name="patente", placeholder="Patente", required)
        select(name="tipo", required)
          option(value="Camión") Camión
          option(value="Furgón") Furgón
          option(value="Camioneta") Camioneta
        select(name="estado", required)
          option(value="Activo") Activo
          option(value="En Reparación") En Reparación
          option(value="Retirado") Retirado
        input(type="number", name="capacidad", placeholder="Capacidad (kg)", required min="1")
        .modal-actions
          button(type="submit") Guardar cambios
          button(type="button", id="btnCancelarEditar") Cancelar
  button#btnMostrarFormAgregar.btn-fab(type="button") Agregar vehículo
  
  // DATOS HARDCODEADOS TEMPORALMENTE PARA PROBAR
  ul.vehiculo-list
    each vehiculo in vehiculos
      li.vehiculo-item(data-id=vehiculo._id class=vehiculo.estado)
        .vehiculo-patente Patente: #{vehiculo.patente}
        .vehiculo-tipo Tipo: #{vehiculo.tipo}  
        if vehiculo.estado == "Activo" 
          .vehiculo-estado Estado:
            span.badge.badge-activo Activo
        else if vehiculo.estado == "Retirado"  
          .vehiculo-estado Estado: 
            span.badge.badge-retirado Retirado
        else
          .vehiculo-estado Estado:
            span.badge.badge-en-reparacion En Reparación
        .vehiculo-capacidad Capacidad: #{vehiculo.capacidad} kg
        .vehiculo-actions
          button.btn-modificar(type="button") Modificar
          button.btn-eliminar(type="button") Eliminar
  
  script(src="/scripts/flota.js")
  
  // OCULTAR ACCIONES RÁPIDAS
  style.
    footer { display: none !important; }